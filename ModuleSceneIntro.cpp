#include "Globals.h"
#include "Application.h"
#include "ModuleSceneIntro.h"



ModuleSceneIntro::ModuleSceneIntro(Application* app, bool start_enabled) : Module(app, start_enabled)
{
	graphics = NULL;
}

ModuleSceneIntro::~ModuleSceneIntro()
{}

// Load assets
bool ModuleSceneIntro::Start()
{
	LOG("Loading Intro assets");
	bool ret = true;

	App->renderer->camera.x = App->renderer->camera.y = 0;

	graphics = App->textures->Load("pinball/pinball2.png");

	float points[34 * 2] = {
		0.17999999225139618, 0,
		0.17999999225139618, 0.029999999329447746,
		0.014999999664723873, 0.08999999612569809,
		0.014999999664723873, 0.2849999964237213,
		0.044999998062849045, 0.3149999976158142,
		0.044999998062849045, 0.3449999988079071,
		0.029999999329447746, 0.35999998450279236,
		0.029999999329447746, 0.75,
		0.044999998062849045, 0.7799999713897705,
		0.20999999344348907, 0.9449999928474426,
		0.29999998211860657, 0.9899999499320984,
		0.375, 0.9899999499320984,
		0.4350000023841858, 0.9749999642372131,
		0.47999998927116394, 0.9599999785423279,
		0.5249999761581421, 0.9300000071525574,
		0.5849999785423279, 0.8549999594688416,
		0.607083261013031, 0.7958329916000366,
		0.6150000095367432, 0.7199999690055847,
		0.6150000095367432, 0.07499999552965164,
		0.5849999785423279, 0.07499999552965164,
		0.5849999785423279, 0.7199999690055847,
		0.5720832943916321, 0.7824996709823608,
		0.5550000071525574, 0.8399999737739563,
		0.5249999761581421, 0.8700000047683716,
		0.5099999904632568, 0.8549999594688416,
		0.5550000071525574, 0.675000011920929,
		0.5550000071525574, 0.5099999904632568,
		0.5099999904632568, 0.41999998688697815,
		0.5099999904632568, 0.3449999988079071,
		0.5699999928474426, 0.29999998211860657,
		0.5699999928474426, 0.11999999731779099,
		0.5550000071525574, 0.10499999672174454,
		0.38999998569488525, 0.029999999329447746,
		0.38999998569488525, 0};

	background = App->physics->AddEdge({0,0,1024,1024}, points, 34 * 2);

	return ret;
}

// Load assets
bool ModuleSceneIntro::CleanUp()
{
	LOG("Unloading Intro scene");

	App->textures->Unload(graphics);
	App->physics->DestroyBody(background);

	return true;
}

// Update: draw background
update_status ModuleSceneIntro::Update()
{
	return UPDATE_CONTINUE;
}